"use strict";(self.webpackChunkalphabuilder_site=self.webpackChunkalphabuilder_site||[]).push([[3212],{1620:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var o=r(6540),a=r(8478),l=r(4848);const n=()=>(0,l.jsx)(a.A,{children:()=>{const e=r(4708),t=()=>{const e=getComputedStyle(document.documentElement);return{textColor:e.getPropertyValue("--ifm-font-color-base").trim(),bgColor:e.getPropertyValue("--ifm-background-color").trim()}},[a,n]=(0,o.useState)(t()),[i,s]=(0,o.useState)(100),[d,c]=(0,o.useState)(10),[u,p]=(0,o.useState)(20),[x,m]=(0,o.useState)(null),[h,g]=(0,o.useState)(!1),[b,y]=(0,o.useState)(null),f=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(async()=>{g(!0),y(null);try{const e=await fetch(`https://api.alphabuilder.xyz/dashboard/ivs?spot=${i}&maturities=${d}&strikes=${u}`);if(!e.ok)throw new Error("API error");const t=await e.json();m(t)}catch(e){console.error(e),y("Failed to fetch IV Surface data")}finally{g(!1)}})()},[i,d,u]),(0,o.useEffect)(()=>{const e=document.documentElement,r=()=>n(t()),o=new MutationObserver(r);return o.observe(e,{attributes:!0,attributeFilter:["data-theme","data-accent"]}),window.addEventListener("colorChange",r),()=>{o.disconnect(),window.removeEventListener("colorChange",r)}},[]),(0,o.useEffect)(()=>{if(!x||!f.current)return;const t=x.data,r=[...new Set(t.map(e=>e.maturity))],o=[...new Set(t.map(e=>e.moneyness))],l=r.map(e=>o.map(r=>t.find(t=>t.maturity===e&&t.moneyness===r)?.iv??null)),n={x:o,y:r,z:l,type:"surface",colorscale:"Viridis",hovertemplate:"Moneyness: %{x:.2f}<br>Maturity: %{y:.2f}Y<br>IV: %{z:.2%}<extra></extra>"},i={title:{text:"Implied Volatility Surface",font:{color:a.textColor}},paper_bgcolor:a.bgColor,plot_bgcolor:a.bgColor,autosize:!0,scene:{xaxis:{title:"Moneyness (K/F)",color:a.textColor},yaxis:{title:"Maturity (Years)",color:a.textColor},zaxis:{title:"Implied Volatility",color:a.textColor}}};return e.newPlot(f.current,[n],i,{responsive:!0}),()=>e.purge(f.current)},[x,a]),(0,l.jsxs)("div",{style:{maxWidth:"1100px",margin:"3rem auto",padding:"2rem",borderRadius:"20px",background:"var(--ifm-background-color)",transition:"background 0.3s ease, color 0.3s ease"},children:[(0,l.jsx)("h1",{style:{textAlign:"center",marginBottom:"1.5rem",color:a.textColor,transition:"color 0.3s ease",cursor:"pointer"},onMouseEnter:e=>e.target.style.color="var(--hover-color)",onMouseLeave:e=>e.target.style.color=a.textColor,children:"Interactive Implied Volatility Surface"}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1.5rem",marginBottom:"1.5rem",flexWrap:"wrap",color:a.textColor},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Spot: "}),(0,l.jsx)("input",{type:"number",value:i,onChange:e=>s(parseFloat(e.target.value)),style:{width:"80px",padding:"0.4rem",borderRadius:"8px",border:`1px solid ${a.textColor}`,color:a.textColor,background:"transparent"}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Maturities: "}),(0,l.jsx)("input",{type:"number",min:5,max:30,value:d,onChange:e=>c(parseInt(e.target.value)),style:{width:"80px",padding:"0.4rem",borderRadius:"8px",border:`1px solid ${a.textColor}`,color:a.textColor,background:"transparent"}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Strikes: "}),(0,l.jsx)("input",{type:"number",min:10,max:50,value:u,onChange:e=>p(parseInt(e.target.value)),style:{width:"80px",padding:"0.4rem",borderRadius:"8px",border:`1px solid ${a.textColor}`,color:a.textColor,background:"transparent"}})]})]}),(0,l.jsx)("div",{style:{height:"600px",width:"100%",overflow:"hidden",borderRadius:"12px",background:"var(--background-color)",padding:"1rem"},children:h?(0,l.jsx)("p",{style:{textAlign:"center",color:a.textColor},children:"Loading IV Surface..."}):b?(0,l.jsx)("p",{style:{textAlign:"center",color:"red"},children:b}):x?(0,l.jsx)("div",{ref:f,style:{width:"100%",height:"100%"}}):(0,l.jsx)("p",{style:{textAlign:"center"},children:"No data available"})})]})}})}}]);