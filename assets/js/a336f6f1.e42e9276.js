"use strict";(self.webpackChunkalphabuilder_site=self.webpackChunkalphabuilder_site||[]).push([[7115],{512:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});r(6540);var a=r(8478),n=r(4848);function o(){return(0,n.jsx)(a.A,{fallback:(0,n.jsx)("div",{children:"Loading IV dashboard\u2026"}),children:()=>{const e=r(4897).A;return(0,n.jsx)(e,{})}})}},4897:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(6540),n=r(4848);function o(){const[e,t]=(0,a.useState)(null),o=()=>{if("undefined"==typeof window||"undefined"==typeof document)return{textColor:"#ffffff",bgColor:"#000000"};const e=getComputedStyle(document.documentElement);return{textColor:e.getPropertyValue("--ifm-font-color-base").trim(),bgColor:e.getPropertyValue("--ifm-background-color").trim()}},[l,s]=(0,a.useState)(o),[i,c]=(0,a.useState)(100),[d,u]=(0,a.useState)(10),[h,f]=(0,a.useState)(20),[m,p]=(0,a.useState)(null),[x,b]=(0,a.useState)(!1),[y,g]=(0,a.useState)(null),v=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=!0;return r.e(4708).then(r.t.bind(r,4708,23)).then(r=>{e&&t(r)}).catch(t=>{console.error("Failed to load Plotly:",t),e&&g("Failed to load chart library")}),()=>{e=!1}},[]);return(0,a.useEffect)(()=>{(async()=>{b(!0),g(null);try{const e=await fetch(`https://api.alphabuilder.xyz/dashboard/ivs?spot=${i}&maturities=${d}&strikes=${h}`);if(!e.ok)throw new Error("API error");const t=await e.json();p(t)}catch(e){console.error(e),g("Failed to fetch IV Surface data")}finally{b(!1)}})()},[i,d,h]),(0,a.useEffect)(()=>{if("undefined"==typeof window||"undefined"==typeof document)return;const e=document.documentElement,t=()=>s(o()),r=new MutationObserver(t);return r.observe(e,{attributes:!0,attributeFilter:["data-theme","data-accent"]}),window.addEventListener("colorChange",t),()=>{r.disconnect(),window.removeEventListener("colorChange",t)}},[]),(0,a.useEffect)(()=>{if(!e||!m||!v.current)return;const t=e,r=m.data||[];if(!r.length)return;const a=[...new Set(r.map(e=>e.maturity))],n=[...new Set(r.map(e=>e.moneyness))],o=a.map(e=>n.map(t=>r.find(r=>r.maturity===e&&r.moneyness===t)?.iv??null)),s={x:n,y:a,z:o,type:"surface",colorscale:"Viridis",colorbar:{thickness:15,x:1.05},hovertemplate:"Moneyness: %{x:.2f}<br>Maturity: %{y:.2f}Y<br>IV: %{z:.2%}<extra></extra>"},i={paper_bgcolor:l.bgColor,plot_bgcolor:l.bgColor,autosize:!0,margin:{l:0,r:0,t:50,b:50},scene:{xaxis:{title:"Moneyness (K/F)",color:l.textColor},yaxis:{title:"Maturity (Years)",color:l.textColor},zaxis:{title:"Implied Volatility",color:l.textColor}}};try{t.newPlot(v.current,[s],i,{responsive:!0})}catch(c){console.error("Plotly.newPlot error:",c),g("Failed to render chart")}return()=>{try{t.purge(v.current)}catch(c){}}},[e,m,l]),(0,n.jsxs)("div",{className:"dashboard-container",children:[(0,n.jsx)("h1",{className:"dashboard-title",style:{color:l.textColor},children:"Interactive Implied Volatility Surface"}),(0,n.jsxs)("div",{className:"dashboard-controls",style:{color:l.textColor},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Spot: "}),(0,n.jsx)("input",{type:"number",value:i,onChange:e=>c(parseFloat(e.target.value)),className:"dashboard-input"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Maturities: "}),(0,n.jsx)("input",{type:"number",min:5,max:30,value:d,onChange:e=>u(parseInt(e.target.value)),className:"dashboard-input"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Strikes: "}),(0,n.jsx)("input",{type:"number",min:10,max:50,value:h,onChange:e=>f(parseInt(e.target.value)),className:"dashboard-input"})]})]}),(0,n.jsxs)("div",{ref:v,className:"plot-container",children:[!e&&!y&&(0,n.jsx)("p",{className:"loading-message",style:{color:l.textColor},children:"Loading chart engine\u2026"}),x&&!y&&(0,n.jsx)("p",{className:"loading-message",style:{color:l.textColor},children:"Loading IV Surface\u2026"}),y&&(0,n.jsx)("p",{className:"error-message",children:y})]})]})}},8478:(e,t,r)=>{r.d(t,{A:()=>o});r(6540);var a=r(2303),n=r(4848);function o({children:e,fallback:t}){return(0,a.A)()?(0,n.jsx)(n.Fragment,{children:e?.()}):t??null}}}]);