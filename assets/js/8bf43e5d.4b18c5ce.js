"use strict";(self.webpackChunkalphabuilder_site=self.webpackChunkalphabuilder_site||[]).push([[3212],{1620:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var a=r(6540),o=r(8478),s=r(4848);const l=()=>(0,s.jsx)(o.A,{children:()=>{const e=r(4708),t=()=>{const e=getComputedStyle(document.documentElement);return{textColor:e.getPropertyValue("--ifm-font-color-base").trim(),bgColor:e.getPropertyValue("--ifm-background-color").trim()}},[o,l]=(0,a.useState)(t()),[n,i]=(0,a.useState)(100),[c,u]=(0,a.useState)(10),[d,m]=(0,a.useState)(20),[h,p]=(0,a.useState)(null),[x,b]=(0,a.useState)(!1),[y,f]=(0,a.useState)(null),v=(0,a.useRef)(null);return(0,a.useEffect)(()=>{(async()=>{b(!0),f(null);try{const e=await fetch(`https://api.alphabuilder.xyz/dashboard/ivs?spot=${n}&maturities=${c}&strikes=${d}`);if(!e.ok)throw new Error("API error");const t=await e.json();p(t)}catch(e){console.error(e),f("Failed to fetch IV Surface data")}finally{b(!1)}})()},[n,c,d]),(0,a.useEffect)(()=>{const e=document.documentElement,r=()=>l(t()),a=new MutationObserver(r);return a.observe(e,{attributes:!0,attributeFilter:["data-theme","data-accent"]}),window.addEventListener("colorChange",r),()=>{a.disconnect(),window.removeEventListener("colorChange",r)}},[]),(0,a.useEffect)(()=>{if(!h||!v.current)return;const t=h.data,r=[...new Set(t.map(e=>e.maturity))],a=[...new Set(t.map(e=>e.moneyness))],s=r.map(e=>a.map(r=>t.find(t=>t.maturity===e&&t.moneyness===r)?.iv??null)),l={x:a,y:r,z:s,type:"surface",colorscale:"Viridis",colorbar:{thickness:15,x:1.05},hovertemplate:"Moneyness: %{x:.2f}<br>Maturity: %{y:.2f}Y<br>IV: %{z:.2%}<extra></extra>"},n={paper_bgcolor:o.bgColor,plot_bgcolor:o.bgColor,autosize:!0,margin:{l:0,r:0,t:50,b:50},scene:{xaxis:{title:"Moneyness (K/F)",color:o.textColor},yaxis:{title:"Maturity (Years)",color:o.textColor},zaxis:{title:"Implied Volatility",color:o.textColor}}};return e.newPlot(v.current,[l],n,{responsive:!0}),()=>e.purge(v.current)},[h,o]),(0,s.jsxs)("div",{className:"dashboard-container",children:[(0,s.jsx)("h1",{className:"dashboard-title",style:{color:o.textColor},onMouseEnter:e=>e.target.style.color="var(--hover-color)",onMouseLeave:e=>e.target.style.color=o.textColor,children:"Interactive Implied Volatility Surface"}),(0,s.jsxs)("div",{className:"dashboard-controls",style:{color:o.textColor},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Spot: "}),(0,s.jsx)("input",{type:"number",value:n,onChange:e=>i(parseFloat(e.target.value)),className:"dashboard-input",style:{color:o.textColor}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Maturities: "}),(0,s.jsx)("input",{type:"number",min:5,max:30,value:c,onChange:e=>u(parseInt(e.target.value)),className:"dashboard-input",style:{color:o.textColor}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Strikes: "}),(0,s.jsx)("input",{type:"number",min:10,max:50,value:d,onChange:e=>m(parseInt(e.target.value)),className:"dashboard-input",style:{color:o.textColor}})]})]}),(0,s.jsxs)("div",{ref:v,className:"plot-container",children:[x&&(0,s.jsx)("p",{className:"loading-message",style:{color:o.textColor},children:"Loading IV Surface..."}),y&&(0,s.jsx)("p",{className:"error-message",children:y})]})]})}})}}]);